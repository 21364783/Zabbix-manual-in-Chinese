=====================================
1. Web监控项
=====================================

.. contents::

概述
------------------------------------

当web方案创建成功后，新的监控项将会自动添加完成.

方案监控项
-------------------------------------

一个方案创建完成后，Zabbix将会自动在链接的application中添加一下监控项.

+----------------------------------+-----------------------------------------------------------------------------+
|监控项                            |描述                                                                         |
+==================================+=============================================================================+
|·Download speed for scenario·     | | 该值为整个方案的下载速度(Bps)信息，例如 所有步骤的平均值                  |
|`<Scenario>`                      | | 监控项键名: web.test.in[Scenario,,bps]                                    |
|                                  | | 类型: `Numeric(float)`  小数                                              |
+----------------------------------+-----------------------------------------------------------------------------+
|`Failed step of scenario`         | | 该值将显示在整个方案中哪一步执行失败,如果所有步骤均是成功的，则返回 0     |
|`<Scenario>`                      | | 监控项键名: web.test.fail[Scenario]                                       |
|                                  | | 类型：`Numeric(unsigned)`   自然数                                        |
+----------------------------------+-----------------------------------------------------------------------------+
|`Last error message of scenario`  | | 该值将返回整个方案的报错信息                                              |
|`<Scenario>`                      | | 监控项键名: web.test.error[Scenario]                                      |
+----------------------------------+-----------------------------------------------------------------------------+

在实际环境中，请用真正的方案名替换"Scenario".

   .. warning::
   
      Web监控项将自动添加30天历史和90天趋势保留时间                                 

在创建触发器和告警时可以利用这些监控项.
   
   *例子1*

   创建一个"web方案失败"的触发器,你可以如此定义触发器的表达式::
      
       {host:web.test.fail[Scenario].last(0)}#0

   在实际环境中请将'Scenario'替换为你方案的真正名字.
   
   *例子2*
   
   创建一个"web方案非常慢"的触发器,你可以如此定义触发器的表达式::
   
        {host:web.test.in[Scenario,,bps].last(0)}<10000
  
   在实际环境中请将'Scenario'替换为你方案的真正名字.
   
   
方案步骤监控项
-------------------------

在创建完一个步骤后，Zabbix会自动会在选择的应用中添加如下监控项.

+----------------------------------+-----------------------------------------------------------------------------+
|监控项                            |描述                                                                         |
+==================================+=============================================================================+
|`Download speed for step <Step>`  | 该监控项为本步骤的下载速度(Bps).                                            |
|`of scenario <Scenario>`          | 监控项键名: web.test.in[Scenario,Step,bps]                                  |
|                                  | 类型: `Numeric(float)`   小数                                               |
+----------------------------------+-----------------------------------------------------------------------------+
|`Response time for step <Step>`   | 该监控项将收集本步骤的响应时间(单位:秒)。                                   |
|`of scenario <Scenario>`          | 响应时间指发起请求开始到所有数据接收完成的时间                              |
|                                  | 监控项键名: web.test.time[Scenario,Step]                                    |
|                                  | 类型: `Numeric(float)`   小数                                               |
+----------------------------------+-----------------------------------------------------------------------------+
|`Response code for step <Step>`   | 该监控项将收集本步骤的响应状态码.                                           |
|`of scenario <Scenario>`          | 监控项键名: web.test.rspcode[Scenario,Step]                                 |
|                                  | 类型: `Numeric(unsigned)`  自然数                                           |
+----------------------------------+-----------------------------------------------------------------------------+

在实际环境中请将"Scenario"及"Step"替换为环境中的真实名字.

   .. warning::
   
      Web监控项将自动添加30天历史和90天趋势保留时间                                 

这些监控值可以用于创建触发器及定义告警条件.例如创建一个"Zabbix GUI登录太慢"的触发器，你可以如此定义触发器的表达式::

   {zabbix:web.test.time[ZABBIX GUI,Login].last(0)}>3   
   
	  